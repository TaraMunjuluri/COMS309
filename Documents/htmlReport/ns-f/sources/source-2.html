


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > MenteeRatingController</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">onetomany.RatingMentor</a>
</div>

<h1>Coverage Summary for Class: MenteeRatingController (onetomany.RatingMentor)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">MenteeRatingController</td>
<td class="coverageStat">
  <span class="percent">
    14.3%
  </span>
  <span class="absValue">
    (1/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    3.6%
  </span>
  <span class="absValue">
    (1/28)
  </span>
</td>
</tr>
  <tr>
    <td class="name">MenteeRatingController$ErrorResponse</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    10%
  </span>
  <span class="absValue">
    (1/10)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    3.1%
  </span>
  <span class="absValue">
    (1/32)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;//package onetomany.RatingMentor;
&nbsp;//
&nbsp;//
&nbsp;//import onetomany.MenteeSurvey.Mentee;
&nbsp;//import onetomany.MenteeSurvey.MenteeRepository;
&nbsp;//import onetomany.MentorSurvey.Mentor;
&nbsp;//import onetomany.MentorSurvey.MentorRepository;
&nbsp;//import org.springframework.beans.factory.annotation.Autowired;
&nbsp;//import org.springframework.http.HttpStatus;
&nbsp;//import org.springframework.http.ResponseEntity;
&nbsp;//import org.springframework.web.bind.annotation.*;
&nbsp;//
&nbsp;//import java.util.List;
&nbsp;//import onetomany.MenteeSurvey.Mentee;
&nbsp;//import onetomany.MentorSurvey.Mentor;
&nbsp;//import org.springframework.beans.factory.annotation.Autowired;
&nbsp;//import org.springframework.web.bind.annotation.*;
&nbsp;//
&nbsp;//import java.util.List;
&nbsp;//
&nbsp;//@RestController
&nbsp;//@RequestMapping(&quot;/mentee-ratings&quot;)
&nbsp;//public class MenteeRatingController {
&nbsp;//
&nbsp;////    @Autowired
&nbsp;////    private MenteeRatingRepository menteeRatingRepository;
&nbsp;//
&nbsp;//    @Autowired
&nbsp;//    private MenteeRatingService menteeRatingService;
&nbsp;//
&nbsp;//    // Constructor Injection (preferred)
&nbsp;//
&nbsp;//    private final MenteeRepository menteeRepository;
&nbsp;//    private final MentorRepository mentorRepository;
&nbsp;//    private final MenteeRatingRepository menteeRatingRepository;
&nbsp;//
&nbsp;//    // Use explicit constructor for dependency injection
&nbsp;//    public MenteeRatingController(
&nbsp;//            MenteeRepository menteeRepository,
&nbsp;//            MentorRepository mentorRepository,
&nbsp;//            MenteeRatingRepository menteeRatingRepository) {
&nbsp;//        this.menteeRepository = menteeRepository;
&nbsp;//        this.mentorRepository = mentorRepository;
&nbsp;//        this.menteeRatingRepository = menteeRatingRepository;
&nbsp;//    }
&nbsp;//
&nbsp;//
&nbsp;//    @PostMapping(&quot;/rate/{menteeId}/{mentorId}/{rating}&quot;)
&nbsp;//    public ResponseEntity&lt;MenteeRating&gt; rateMentor(
&nbsp;//            @PathVariable Long menteeId,
&nbsp;//            @PathVariable Long mentorId,
&nbsp;//            @PathVariable int rating) {
&nbsp;//        try {
&nbsp;//            MenteeRating ratingResponse = menteeRatingService.rateMentor(menteeId, mentorId, rating);
&nbsp;//            return ResponseEntity.ok(ratingResponse);
&nbsp;//        } catch (IllegalArgumentException e) {
&nbsp;//            return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(null);
&nbsp;//        }
&nbsp;//    }
&nbsp;//
&nbsp;//    @GetMapping(&quot;/mentee/{menteeId}&quot;)
&nbsp;//    public List&lt;MenteeRating&gt; getRatingsByMentee(@PathVariable Long menteeId) {
&nbsp;//        Mentee mentee = new Mentee();
&nbsp;//        mentee.setId(menteeId); // Assuming Mentee entity has an &#39;id&#39; field
&nbsp;//        return menteeRatingRepository.findByMentee(mentee);
&nbsp;//    }
&nbsp;//
&nbsp;//    @GetMapping(&quot;/mentor/{mentorId}&quot;)
&nbsp;//    public List&lt;MenteeRating&gt; getRatingsByMentor(@PathVariable Long mentorId) {
&nbsp;//        Mentor mentor = new Mentor();
&nbsp;//        mentor.setId(mentorId); // Assuming Mentor entity has an &#39;id&#39; field
&nbsp;//        return menteeRatingRepository.findByMentor(mentor);
&nbsp;//    }
&nbsp;////    @PutMapping(&quot;/{menteeId}/rate/{mentorId}/{rating}&quot;)
&nbsp;////    public ResponseEntity&lt;MenteeRating&gt; rateMentor(
&nbsp;////            @PathVariable Long menteeId,
&nbsp;////            @PathVariable Long mentorId,
&nbsp;////            @PathVariable int rating) {
&nbsp;////
&nbsp;////        // Ensure the rating is valid
&nbsp;////        if (rating &lt; 1 || rating &gt; 5) {
&nbsp;////            return ResponseEntity.badRequest().body(null);
&nbsp;////        }
&nbsp;////
&nbsp;////        // Fetch the mentee and mentor
&nbsp;////        Mentee mentee = menteeRepository.findById(menteeId)
&nbsp;////                .orElseThrow(() -&gt; new RuntimeException(&quot;Mentee not found&quot;));
&nbsp;////        Mentor mentor = mentorRepository.findById(mentorId)
&nbsp;////                .orElseThrow(() -&gt; new RuntimeException(&quot;Mentor not found&quot;));
&nbsp;////
&nbsp;////        // Create the rating
&nbsp;////        MenteeRating menteeRating = new MenteeRating();
&nbsp;////        menteeRating.setMentee(mentee);
&nbsp;////        menteeRating.setMentor(mentor);
&nbsp;////        menteeRating.setRating(rating);
&nbsp;////
&nbsp;////        // Save the rating
&nbsp;////        MenteeRating savedRating = menteeRatingRepository.save(menteeRating);
&nbsp;////        return ResponseEntity.status(HttpStatus.CREATED).body(savedRating);
&nbsp;////    }
&nbsp;//
&nbsp;//}
&nbsp;
&nbsp;
&nbsp;package onetomany.RatingMentor;
&nbsp;
&nbsp;import onetomany.MenteeSurvey.Mentee;
&nbsp;import onetomany.MentorSurvey.Mentor;
&nbsp;import org.springframework.beans.factory.annotation.Autowired;
&nbsp;import org.springframework.http.HttpStatus;
&nbsp;import org.springframework.http.ResponseEntity;
&nbsp;import org.springframework.web.bind.annotation.*;
&nbsp;
&nbsp;import java.util.List;
&nbsp;
&nbsp;@RestController
&nbsp;@RequestMapping(&quot;/mentee-ratings&quot;)
<b class="fc">&nbsp;public class MenteeRatingController {</b>
&nbsp;    @Autowired
&nbsp;    private MenteeRatingService menteeRatingService;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private MenteeRatingRepository menteeRatingRepository;
&nbsp;
&nbsp;    @PostMapping(&quot;/rate/{menteeId}/{mentorId}/{rating}&quot;)
&nbsp;    public ResponseEntity&lt;?&gt; rateMentor(
&nbsp;            @PathVariable Long menteeId,
&nbsp;            @PathVariable Long mentorId,
&nbsp;            @PathVariable int rating) {
&nbsp;        try {
<b class="nc">&nbsp;            MenteeRating ratingResponse = menteeRatingService.rateMentor(menteeId, mentorId, rating);</b>
<b class="nc">&nbsp;            return ResponseEntity.ok(ratingResponse);</b>
<b class="nc">&nbsp;        } catch (IllegalArgumentException e) {</b>
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.BAD_REQUEST)</b>
<b class="nc">&nbsp;                    .body(new ErrorResponse(e.getMessage()));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @GetMapping(&quot;/mentee/{menteeId}&quot;)
&nbsp;    public List&lt;MenteeRating&gt; getRatingsByMentee(@PathVariable Long menteeId) {
<b class="nc">&nbsp;        Mentee mentee = new Mentee();</b>
<b class="nc">&nbsp;        mentee.setId(menteeId);</b>
<b class="nc">&nbsp;        return menteeRatingRepository.findByMentee(mentee);</b>
&nbsp;    }
&nbsp;
&nbsp;    @GetMapping(&quot;/mentor/{mentorId}&quot;)
&nbsp;    public List&lt;MenteeRating&gt; getRatingsByMentor(@PathVariable Long mentorId) {
<b class="nc">&nbsp;        Mentor mentor = new Mentor();</b>
<b class="nc">&nbsp;        mentor.setId(mentorId);</b>
<b class="nc">&nbsp;        return menteeRatingRepository.findByMentor(mentor);</b>
&nbsp;    }
&nbsp;
&nbsp;    @GetMapping(&quot;/mentor/{mentorId}/average&quot;)
&nbsp;    public ResponseEntity&lt;?&gt; getMentorAverageRating(@PathVariable Long mentorId) {
&nbsp;        try {
<b class="nc">&nbsp;            Double averageRating = menteeRatingService.getMentorAverageRating(mentorId);</b>
<b class="nc">&nbsp;            return ResponseEntity.ok(averageRating != null ? averageRating : 0.0);</b>
<b class="nc">&nbsp;        } catch (IllegalArgumentException e) {</b>
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.BAD_REQUEST)</b>
<b class="nc">&nbsp;                    .body(new ErrorResponse(e.getMessage()));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @PostMapping(&quot;/rate&quot;)
&nbsp;    public ResponseEntity&lt;?&gt; rateMentorByUsername(
&nbsp;            @RequestParam String menteeUsername,
&nbsp;            @RequestParam String mentorUsername,
&nbsp;            @RequestParam int rating) {
&nbsp;        try {
<b class="nc">&nbsp;            MenteeRating ratingResponse = menteeRatingService.rateMentorByUsername(menteeUsername, mentorUsername, rating);</b>
<b class="nc">&nbsp;            return ResponseEntity.ok(ratingResponse);</b>
<b class="nc">&nbsp;        } catch (IllegalArgumentException e) {</b>
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.BAD_REQUEST)</b>
<b class="nc">&nbsp;                    .body(new ErrorResponse(e.getMessage()));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @GetMapping(&quot;/mentor/average&quot;)
&nbsp;    public ResponseEntity&lt;?&gt; getMentorAverageRatingByUsername(@RequestParam String mentorUsername) {
&nbsp;        try {
<b class="nc">&nbsp;            Long mentorId = menteeRatingService.getMentorIdByUsername(mentorUsername);</b>
<b class="nc">&nbsp;            Double averageRating = menteeRatingService.getMentorAverageRating(mentorId);</b>
<b class="nc">&nbsp;            return ResponseEntity.ok(averageRating != null ? averageRating : 0.0);</b>
<b class="nc">&nbsp;        } catch (IllegalArgumentException e) {</b>
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.BAD_REQUEST)</b>
<b class="nc">&nbsp;                    .body(new ErrorResponse(e.getMessage()));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    // Inner class for error responses
&nbsp;    public static class ErrorResponse {
&nbsp;        private String message;
&nbsp;
<b class="nc">&nbsp;        public ErrorResponse(String message) {</b>
<b class="nc">&nbsp;            this.message = message;</b>
&nbsp;        }
&nbsp;
&nbsp;        public String getMessage() {
<b class="nc">&nbsp;            return message;</b>
&nbsp;        }
&nbsp;
&nbsp;        public void setMessage(String message) {
<b class="nc">&nbsp;            this.message = message;</b>
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-12-11 18:43</div>
</div>
</body>
</html>
